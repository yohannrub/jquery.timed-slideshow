/*!
 * jQuery SVG-PieTimer v@1.0
 * https://github.com/yohannrub/jquery.svg-pietimer
 * Licensed under the MIT license
 */
(function(e){var c={duration:5000,refreshInterval:50,loop:false,callback:e.noop,centerRadius:33,cssClass:"pietimer"};var a={};a.radius=50;a.viewBoxSize=2*a.radius;a.svgPathD="M 0 0 v -"+a.radius+" A "+a.radius+" "+a.radius+" 1 ";var d="pietimer";var b={init:function(f){f=e.extend({},c,f);var g=['<svg class="'+f.cssClass+'" viewBox="0 0 '+a.viewBoxSize+" "+a.viewBoxSize+'">','<path transform="translate('+a.radius+","+a.radius+')"/>','<circle cx="'+a.radius+'" cy="'+a.radius+'" r="'+f.centerRadius+'"/>',"</svg>"].join("");e(g).appendTo(this);return this.each(function(){var i=e(this);var h=e.extend({},f);h.isPlaying=false;h.timerInterval=null;h.timeStart=null;h.timePause=null;h.$svgPath=i.find("path");i.data(d,h)})},draw:function(f){return this.each(function(){var k=e(this);var j=k.data(d);var l=f*2*Math.PI,g=Math.sin(l)*a.radius,m=Math.cos(l)*-a.radius,h=(f%1>0.5)?1:0,i=a.svgPathD+h+" 1 "+g+" "+m+" z";j.$svgPath.attr("d",i)})},play:function(){return this.each(function(){var g=e(this);var f=g.data(d);if(!f.isPlaying){f.isPlaying=true;clearInterval(f.timerInterval);f.timeStart=(f.timeStart&&f.timePause)?e.now()-(f.timePause-f.timeStart):e.now();f.timerInterval=setInterval(function(){var h=(e.now()-f.timeStart)/f.duration;if(h>=1){f.callback.call(g);if(f.loop){f.timeStart=f.timeStart+f.duration*Math.floor(h)}else{g[d]("draw",0.99999);g[d]("pause");f.timeStart=f.timePause=null;return}}g[d]("draw",h)},f.refreshInterval)}})},pause:function(){return this.each(function(){var g=e(this);var f=g.data(d);if(f.isPlaying){f.isPlaying=false;clearInterval(f.timerInterval);f.timePause=e.now()}})},stop:function(){return this.each(function(){var g=e(this);var f=g.data(d);g[d]("pause");f.timeStart=f.timePause=null;g[d]("draw",0)})},reset:function(){return this.each(function(){var g=e(this);var f=g.data(d);g[d]("pause");f.timeStart=f.timePause=null;g[d]("play")})}};e.fn[d]=function(f){if(b[f]){return b[f].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof f==="object"||!f){return b.init.apply(this,arguments)}else{e.error("Method "+f+" does not exist on jQuery."+d)}}}})(jQuery);